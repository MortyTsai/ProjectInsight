# configs/templates/project.template.yaml
# ======================================================================
# ProjectInsight - 專案分析設定範本
# ======================================================================
# [快速開始指南]
# 1. 將此檔案複製到 'configs/projects/' 目錄下，並重新命名 (例如 my_project.yaml)。
# 2. 修改 [Part 1] 中的 'target_project_path' 指向您的專案目錄。
# 3. 直接執行分析！ProjectInsight 會自動偵測結構並在需要時引導您。
# ======================================================================

# ======================================================================
# Part 1: 專案基礎設定 (Project Basics) - [唯一必填]
# ======================================================================

# [必填] 目標專案的「根目錄」。
# 支援絕對路徑 (例如 "D:/Work/MyProject") 或相對路徑。
target_project_path: "../../../MyAwesomeProject"

# [可選] 輸出目錄。預設為 "../../output/[設定檔名稱]"。
# output_dir: "../../output/my_awesome_project"

# [可選] 專案根套件名稱。
# 系統會自動在 src/, lib/ 或根目錄下偵測。僅在自動偵測失敗時才需手動指定。
# root_package_name: "my_package"


# ======================================================================
# Part 2: 分析類型 (Analysis Types)
# ======================================================================

analysis_types:
  # [核心] 高階組件互動圖。分析類別與公開函式之間的呼叫與語義關係。
  - "component_interaction"

  # [進階] 概念流動圖 (自動追蹤核心物件的流動)。
  # - "auto_concept_flow"

  # [進階] 動態行為圖 (基於規則識別生產者/消費者模式)。
  # - "dynamic_behavior"


# ======================================================================
# Part 3: 視覺化與專家設定 (Visualization & Expert Mode)
# ======================================================================
# ProjectInsight 擁有強大的智慧預設值。
# 以下設定僅供有特殊需求的專家使用，預設皆已註解。
# ----------------------------------------------------------------------

visualization:
  component_interaction_graph:
    # --- 基礎渲染設定 ---
    layout_engine: "dot"  # 推薦: dot (層次), neato (力導向), fdp (叢集)
    dpi: 200              # 輸出解析度
    render_timeout: 120   # [V2.1] 渲染超時秒數。大型專案可調高至 300 或 600。

    # --- [專家模式] 聚焦分析策略 ---
    # 系統預設會分析全景。若專案過大，"智慧精靈" 會自動跳出並推薦入口點。
    # 您也可以在此手動強制指定。
    # focus:
    #   entrypoints:
    #     - "my_package.core.app.App"  # 手動指定入口點 FQN
    #   initial_depth: 2               # 初始搜索深度
    #   min_nodes: 10                  # 智慧深度調整的目標節點數
    #   max_search_depth: 7            # 最大搜索深度限制
    #
    #   # [V2.2] 方向控制與智慧降級
    #   direction: "both"              # 可選: "both" (雙向), "downstream" (僅向下), "upstream" (僅向上)
    #   max_nodes_for_bidirectional: 500 # 當雙向分析節點超過此數，自動切換為單向以防崩潰
    #   auto_downstream_fallback: true   # 是否啟用上述自動降級機制

    # --- [專家模式] 節點過濾 ---
    # filtering:
    #   exclude_nodes:
    #     - "*.tests.*"
    #     - "*.migrations.*"

    # --- [專家模式] 佈局微調 ---
    # layout:
    #   show_internal_calls: false       # 是否顯示同一組件內部的函式呼叫
    #   min_component_size_to_render: 2  # 過濾掉小於此數量的孤立連通分量
    #   stagger_groups: 3                # 階梯式佈局的寬度控制

    # --- [專家模式] 語義連結樣式 ---
    # semantic_analysis:
    #   enabled: true
    #   links:
    #     registers:     { style: "dashed", color: "#1E90FF", label: "registers" }
    #     inherits_from: { style: "dotted", color: "#32CD32", label: "inherits" }
    #     decorates:     { style: "dashed", color: "#FF8C00", label: "decorates" }
    #     proxies:       { style: "dashed", color: "#9932CC", label: "proxies", arrowhead: "tee" }
    #     uses_strategy: { style: "bold",   color: "#FF69B4", label: "uses_strategy" }
    #     depends_on:    { style: "dashed", color: "#DAA520", label: "depends_on" }

  # --- 動態行為圖設定 ---
  dynamic_behavior_graph:
    layout_engine: "dot"
    dpi: 200

# ======================================================================
# Part 4: 報告內容設定 (Report Settings)
# ======================================================================
report_settings:
  tree_view:
    exclude_dirs:
      - "__pycache__"
      - ".git"
      - ".idea"
      - "venv"
      - ".venv"
      - "dist"
      - "build"
      - "output"
      - ".ruff_cache"
      - "*.egg-info"
      - "tests"
      - "docs"
      - "site-packages"
    exclude_extensions:
      - ".pyc"
      - ".pyd"
      - ".so"
      - ".dll"
      - ".exe"
      - ".bin"
      - ".pkl"
    exclude_files:
      - ".DS_Store"
      - "Thumbs.db"
  source_code:
    included_extensions:
      - ".py"
      - ".yaml"
      - ".toml"
      - ".json"

# ======================================================================
# Part 5: 進階分析規則 (Advanced Rules)
# ======================================================================

# [可選] 概念流動圖設定
# auto_concept_flow:
#   exclude_patterns:
#     - "*_LOGGER"
#     - "*_VERSION"

# [可選] 動態行為分析規則 (範例)
# dynamic_behavior_analysis:
#   roles:
#     producer: { name: "生產者", color: "#FFDDC1" }
#     consumer: { name: "消費者", color: "#C1E1FF" }
#   rules:
#     - rule_name: "Task Queue Pattern"
#       type: "producer_consumer"
#       correlation_key: "task_name"
#       producer:
#         role: "producer"
#         match_target: "dict_creation"
#         key_argument: "task_type"
#       consumer:
#         role: "consumer"
#         match_target: "function_entry"
#         method_fqn: "my_app.worker.process_task"

# ======================================================================
# Part 6: 架構層級定義 (Architecture Layers)
# ======================================================================
# 系統會自動為頂層套件分配顏色。您可在此手動覆寫。
# architecture_layers:
#   (root):
#     name: "專案根目錄"
#     color: "#EAEAEA"
#   core:
#     name: "核心模組"
#     color: "#FFD700"
#   utils:
#     name: "工具函式"
#     color: "#90EE90"