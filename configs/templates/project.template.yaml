# configs/templates/project.template.yaml
# ======================================================================
# ProjectInsight - 專案分析設定範本 (V2.1)
# ======================================================================
# 說明:
# 1. 這是 ProjectInsight 的一份完整功能設定檔範本，也是一份內嵌式的使用手冊。
# 2. 將此檔案複製到 'configs/projects/' 目錄下並為您的專案重新命名。
# 3. 大多數選項都有智慧預設值，您只需修改標有 [必要] 的部分即可快速開始。
# ======================================================================


# ======================================================================
# Part 1: 專案基礎設定 (Project Basics)
# ======================================================================
# 此區塊定義了被分析專案的基本資訊。
# ----------------------------------------------------------------------

# [必要] 要分析的目標專案的「根目錄」。
# 可以是絕對路徑 (例如 "D:/MyProject") 或相對於本設定檔的相對路徑。
target_project_path: "../../../MyAwesomeProject"

# [可選, 專家覆寫] 目標專案的根套件名稱。
#
# [!!] 參數教學 (V2.0+):
#   - ProjectInsight 現在會自動偵測專案原始碼目錄下的所有「頂層套件/模組」。
#   - 在大多數情況下，您「不需要」設定此參數。
#   - 只有在以下情況下，您才需要手動指定此參數：
#     1. 自動偵測因非標準的專案結構而失敗。
#     2. 您希望將分析範圍「手動限制」在某個特定的子套件內。
#
# root_package_name: "my_awesome_package"

# [可選] 生成報告與圖表的輸出目錄。
# 預設值: "../../output/[專案設定檔名稱]"
output_dir: "../../output/my_awesome_project"

# [可選] 強制執行完整分析，即使專案體量過大也不會觸發互動式精靈。
# 適用於自動化執行場景。
# 預設值: false
# force_analysis: true


# ======================================================================
# Part 2: 分析類型與詳細配置 (Analysis Configuration)
# ======================================================================
# 此區塊用於選擇要執行的分析類型，並為每種分析提供詳細設定。
# ----------------------------------------------------------------------

analysis_types:
  # [核心] 高階組件互動圖。分析類別與公開函式之間的呼叫與語義關係。
  - "component_interaction"
  # [實驗性] 概念流動圖。自動發現並追蹤專案中關鍵物件實例的流動。
  - "auto_concept_flow"
  # [實驗性] 動態行為圖。根據您定義的規則，識別基於字串或事件的動態行為模式。
  - "dynamic_behavior"

# [可選] `auto_concept_flow` 的詳細設定
auto_concept_flow:
  # 排除符合特定模式的變數，避免將日誌記錄器或版本號等無關變數視為核心概念。
  exclude_patterns:
    - "*_LOGGER"
    - "*_VERSION"

# [可選] `dynamic_behavior` 的詳細設定
dynamic_behavior_analysis:
  # 定義圖中不同角色的名稱與顏色。
  roles:
    producer: { name: "生產者 (Producer)", color: "#FFDDC1" }
    consumer: { name: "消費者 (Consumer)", color: "#C1E1FF" }
  # 定義用於識別動態行為的規則列表。
  rules: []


# ======================================================================
# Part 3: 報告內容設定 (Report Settings)
# ======================================================================
report_settings:
  # 檔案結構樹的過濾規則
  tree_view:
    exclude_dirs:
      - "__pycache__"
      - ".git"
      - ".idea"
      - "venv"
      - ".venv"
      - "dist"
      - "build"
      - "output"
      - ".ruff_cache"
      - "*.egg-info"
      - "tests"
      - "docs"
    exclude_extensions:
      - ".md"
      - ".txt"
      - ".json"
      - ".lock"
    exclude_files:
      - "LICENSE"
      - "README.md"
      - ".*"
  # 報告中包含的原始碼檔案類型
  source_code:
    included_extensions:
      - ".py"
      - ".yaml"
      - ".toml"


# ======================================================================
# Part 4: 視覺化設定 (可選, 所有選項均有智慧預設值)
# ======================================================================
visualization:
  component_interaction_graph:
    layout_engine: "dot" # 可選 'dot', 'neato', 'sfdp' 等 Graphviz 引擎
    dpi: 200 # 輸出圖片的解析度

    # [專家模式] 大型專案分析策略
    # ------------------------------------------------------------------
    focus:
      # [智慧化新功能] 智慧化深度調整
      # ----------------------------------------------------------------
      # 當啟用時，如果初始搜索（使用 initial_depth）產生的節點數少於 min_nodes，
      # 系統將自動增加搜索深度，每次加 1，直到達到 min_nodes 或 max_search_depth。
      # 這可以確保即使在呼叫鏈很長的框架中，也能生成一個有意義的圖。
      #
      # 預設值: true
      enable_dynamic_depth: true
      # 觸發動態增加深度的最小節點數。
      # 預設值: 10
      min_nodes: 10
      # 智慧化搜索的最大深度限制，以防止圖變得過於龐大或陷入無限循環。
      # 預設值: 7
      max_search_depth: 7
      # ----------------------------------------------------------------

      # [必要] 一個或多個您想分析的核心組件的 FQN (完整路徑)。
      # 可以由智慧推薦精靈自動填入。
      entrypoints:
        - "my_package.main.main_function"
      # 初始搜索深度。如果啟用了智慧化深度調整，這將是起始深度。
      # 預設值: 2
      initial_depth: 2

    # [專家模式] 節點過濾
    # ------------------------------------------------------------------
    filtering:
      # 排除 FQN 符合萬用字元模式的節點。
      exclude_nodes:
        - "*tests*"
        - "*migrations*"

    # [專家模式] 佈局微調
    # ------------------------------------------------------------------
    layout:
      # 是否顯示指向同一組件內部其他方法的呼叫。
      show_internal_calls: true
      # 圖的長寬比。'auto' 會自動調整，'none' 則不進行調整。
      aspect_ratio: "auto"
      # [已棄用] 手動定義節點的渲染層級。此功能已被更智慧的拓撲排序取代。
      # ranking_groups:
      #   - ["my_package.main", "my_package.web.*"]
      #   - ["my_package.services.*"]
      #   - ["my_package.utils.*"]

    # [專家模式] 節點樣式
    # ------------------------------------------------------------------
    node_styles:
      # 是否在節點中顯示函式/類別的 Docstring。
      show_docstrings: true
      title:
        font_size: 11
        path_color: "#555555"
        main_color: "#000000"
      docstring:
        font_size: 9
        color: "#333333"
        spacing: 8

    # [專家模式] 語義連結視覺化設定
    # ------------------------------------------------------------------
    semantic_analysis:
      enabled: true
      links:
        registers:
          style: "dashed"
          color: "#1E90FF"
          label: "registers"
        inherits_from:
          style: "dotted"
          color: "#32CD32"
          label: "inherits"
        decorates:
          style: "dashed"
          color: "#FF8C00"
          label: "decorates"
        proxies:
          style: "dashed"
          color: "#9932CC"
          label: "proxies"
          arrowhead: "tee"
        uses_strategy:
          style: "bold"
          color: "#FF69B4"
          label: "uses_strategy"
        depends_on:
          style: "dashed"
          color: "#DAA520" # GoldenRod color
          label: "depends_on"

  dynamic_behavior_graph:
    layout_engine: "dot"
    dpi: 200
    node_styles:
      show_docstrings: true
      title:
        font_size: 11
        path_color: "#555555"
        main_color: "#000000"
      docstring:
        font_size: 9
        color: "#333333"
        spacing: 8

# ======================================================================
# Part 5: 架構層級定義 (可選, 系統會自動發現)
# ======================================================================
# 手動為專案的子套件/模組定義名稱和顏色，以覆蓋自動分配的顏色。
# `(root)` 是一個特殊關鍵字，用於定義根套件本身的樣式。
# ----------------------------------------------------------------------
# architecture_layers:
#   core:
#     color: "#FF0000"
#   services:
#     name: "核心業務服務層"
#     color: "#D1FFC1"