# src/projectinsight/intelligence/defaults/default_heuristics.yaml
# ======================================================================
# ProjectInsight - 智慧入口點發現 - 預設啟發式計分規則 (V10 - 結構優先版)
# ======================================================================
# 說明:
# V10 版本是最終的調優版。它極大地提升了圖論中心性的權重，確保了
# 專案的結構中心（被廣泛導入的核心 API）能夠超越邊緣的、僅僅是命名
# 討巧的輔助腳本。
# ======================================================================

# --- 權重設定 ---
weights:
  heuristic_score: 0.5      # [再次降低] 啟發式猜測的權重降至最低
  hub_score: 3.5            # [再次提升] 結構中心性的權重提升至最高
  entry_point_score: 3.0    # [保持] 標準化入口點依然是最高權重信號

# --- 啟發式計分規則 (Heuristic Scoring Rules) ---
scoring_rules:
  by_module_path:
    - { pattern: "*.__main__", score: 40 } # [降低]
    - { pattern: "*.main", score: 10 }
    - { pattern: "*.app", score: 10 }
    - { pattern: "*.server", score: 10 }
    - { pattern: "*.wsgi", score: 10 }
    - { pattern: "*.asgi", score: 10 }
    - { pattern: "*.cli", score: 10 }
    - { pattern: "*.manage", score: 5 }
    - { pattern: "scripts.*", score: -30 }
    - { pattern: "docs.*", score: -50 }
    - { pattern: "*tasks*", score: -15 }
    - { pattern: "*jobs*", score: -15 }
    - { pattern: "*settings*", score: -20 }
    - { pattern: "*config*", score: -20 }
    - { pattern: "*tests*", score: -50 }
    - { pattern: "*utils*", score: -30 }
    - { pattern: "*helpers*", score: -30 }
    - { pattern: "*__init__", score: -100 }
  by_definition_name:
    - { pattern: "main", score: 15 }       # [降低]
    - { pattern: "run", score: 10 }        # [降低]
    - { pattern: "start", score: 10 }       # [降低]
    - { pattern: "app", score: 15 }
    - { pattern: "application", score: 15 }
    - { pattern: "handler", score: 10 }
    - { pattern: "router", score: 10 }
    - { pattern: "service", score: 5 }
    - { pattern: "manager", score: 5 }
  by_code_feature:
    - { feature: "has___main__block", score: 20 } # [大幅降低]

# --- 生態位分析規則 (Ecosystem Analysis Rules) ---
entry_points_bonus: 150

# 專家級獎勵規則
frameworks:
  django:
    project_name: "Django"
    bonus_points:
      - { pattern: "django.core.handlers.*", score: 100 }
      - { pattern: "django.urls.*", score: 50 }
      - { pattern: "django.db.models.base.Model", score: 40 }
  pandas:
    project_name: "pandas"
    bonus_points:
      - { pattern: "pandas.core.frame.DataFrame", score: 120 }
      - { pattern: "pandas.core.series.Series", score: 100 }
      # [移除] 移除 io.api.* 規則，因為它不可靠，我們將信任 Hub 分數